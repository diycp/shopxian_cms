<?php 
  namespace common\taglib;  use think\template\TagLib;  use think\Cache;      class Zhanshop extends Taglib {           protected $tags = [          'menu'    => array('attr'=>'limit'),         'widgets'       => ['attr' => 'name,type,val', 'close' => 0],      ];      public function tagMenu($tag, $content){          $parseStr = '<?php $a=appModel("system","SystemSiteMenu")->where(["enabled"=>"true"])->order("rank asc")->limit('.$tag['limit'].')->column("*");';          $parseStr .= 'foreach($a as $k=>$v){ ?>';          $parseStr .= '<?php '                  . 'echo  str_replace(array("[url]","[title]"),array($v["url"],$v["title"]),"'.$content.'");'                  . ' ?>';          $parseStr .= '<?php } ?>';          return $parseStr;      }      public function tagWidgets($tag, $content)      {          $parseStr='<?php ';          $parseStr.='if(isset($widgets)==false){';          $parseStr.='$widgets=new \lib\site\widgets();}';          $parseStr.='echo $widgets->getwidgets("'.$tag['name'].'","'.$tag['type'].'",\''.$tag['val'].'\');?>';          return $parseStr;      }  }  