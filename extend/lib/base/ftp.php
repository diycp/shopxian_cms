<?php 
  namespace lib\base;    class ftp {      private $ftp;     private $dizhi;     private $duankou;     private $time;     private $zhanghao;     private $mima;     private $chaoshitime;     private $moshi;     function __construct($dizhi,$duankou,$time,$zhanghao,$mima,$chaoshitime,$moshi=FALSE) {          $this->ftp=ftp_connect($dizhi, $duankou, $time);         $login=ftp_login($this->ftp, $zhanghao, $mima);         if($login){              return true;          }  else {             return false;          }          ftp_set_option($this->ftp, FTP_TIMEOUT_SEC, $chaoshitime);         ftp_pasv($this->ftp, $moshi);               }           public function yunxing($str){          $res =ftp_exec($this->ftp, $str);          if($res){              echo "ftp命令 {$str} 运行成功<br />\n";              echo nl2br($res);          }else{              echo '无法运行的ftp命令' . $str;          }      }           public function jianmulu($dir){          $dirTrue=ftp_mkdir($this->ftp, $dir);         if($dirTrue){               return true;                      }  else {              return false;                      }      }           public function list_dir($str){          $list_dir = ftp_nlist($this->ftp, $str);         return $list_dir;      }           public function list_dirFile($str,$digui=true){         $list_dirFile=ftp_rawlist($this->ftp, $str,$digui);        return $list_dirFile;      }           public function xitongxinxi(){          $xitongType=ftp_systype($this->ftp);         return $xitongType;      }      public function xiazai($xiazaidizhi,$baocundizhi){          $local_file=$baocundizhi;         $remote_file=$xiazaidizhi;         $mode=FTP_BINARY;         $resumepos=0;         $ftp_get=ftp_get($this->ftp, $local_file, $remote_file, $mode,$resumepos);         if($ftp_get){          return true;              } else {               return false;              }      }           public function xiazaidao_yidaokaiwenjianzhong($xiazaidizhi,$baocundizhi){          $remote_file = $xiazaidizhi;         $local_file = $baocundizhi;         $handle = fopen($local_file, 'w');         $mode=FTP_BINARY;         $resumepos=0;         if (ftp_fget($this->ftp, $handle, $remote_file, $mode, $resumepos)) {              return true;              } else {               return false;              }      }           public function shangchuan($shangchuandizhi,$bendidizhi){          $remote_file=$shangchuandizhi;         $local_file=$bendidizhi;         $putTrue=ftp_put($this->ftp, $remote_file, $local_file, FTP_BINARY, 0);         if($putTrue){              return true;          }else{              return false;          }      }           public function shangchuandakaiwenjian($shangchuandizhi,$bendidizhi){          $file = $bendidizhi;         $handle= fopen($file, 'r');         $remote_file=$shangchuandizhi;         $fputTrue=ftp_fput($this->ftp, $remote_file, $handle, FTP_BINARY, 0);         if($fputTrue){               return true;          }else{              return false;          }      }           public function getSize($dizhi){          $size=ftp_size($this->ftp, $dizhi);         return $size;      }           public function getxiugaishijian($dizhi){          $time=ftp_mdtm($this->ftp, $dizhi);         return $time;      }           public function gaiMing($f,$newfr){          $rename=ftp_rename($this->ftp, $f, $newfr);         if($rename){              return true;          }  else {              return false;          }      }           public function shanchu($file){          $delete=ftp_delete($this->ftp, $file);         if($delete){              return true;          }else{              return false;          }      }           public function getdangqianDir(){          return ftp_pwd($this->ftp);     }           public function fanshangceng(){          ftp_cdup($this->ftp);      }           public function cd($dir){          ftp_chdir($this->ftp, $dir);     }           public function shanchudir($dir){         $delete= ftp_rmdir($this->ftp, $dir);         if($delete){              return true;          }else{              return false;          }      }      public function guanbi(){          ftp_quit($this->ftp);      }  }  